# Домашнее задание к занятию "3.2. Работа в терминале, лекция 2"
1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете что она могла бы быть другого типа.
```bash
cd is a shell builtin
cd это встроенная команда. По тому как это основа, без которой перемещаться не получится, как велосипед без колеса.
Делать её внешней командой нет смысла, это всё равно что создавать файл, но для сохранения надо использовать другую программу, а не ту  которой создан. 
```
2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l? man grep поможет в ответе на этот вопрос. Ознакомьтесь с документом о других подобных некорректных вариантах использования pipe.
```bash
[01:16:47] [/mnt/c/Users/dhebn] ❱❱❱ cat file_test
123
123456
New123
Made in 123456
Nev file test
user password 123

[01:17:00] [/mnt/c/Users/dhebn] ❱❱❱ grep 123 file_test -c
5

[01:17:30] [/mnt/c/Users/dhebn] ❱❱❱ grep 123 file_test |wc -l
5
```

3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?
На хосте:

```bash
kodi@kodi:~$ pstree -p
systemd(1)─┬─ModemManager(660)─┬─{ModemManager}(670)
```

Процесс с PID 1 - systemd

4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?

```bash
ls % 2>/dev/pts/1
```

5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.

```bash
[01:33:39] [/mnt/c/Users/dhebn] ❱❱❱ cat file_test
123
123456
New123
Made in 123456
Nev file test
user password 123
[02:03:39] [/mnt/c/Users/dhebn] ❱❱❱ cat file_test2
cat: file_test2: No such file or directory
[02:03:51] [/mnt/c/Users/dhebn] ❱❱❱ cat <file_test >file_test2
[02:04:17] [/mnt/c/Users/dhebn] ❱❱❱ cat file_test2
123
123456
New123
Made in 123456
Nev file test
user password 123
```

6. Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?

```bash
Вывести получится, используя перенаправление вывода, но наблюдать в графичеком режиме не получится.
```

7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?

```bash
bash 5>&1 - "Cоздаст дескриптор 5 и перенаправит в stdout"

nick@nick42ru:/mnt/c/Users/dhebn$ echo netology > /proc/$$/fd/5
netology

Выдаёт дискриптор 5, который пернеаправлен в stdout, если запустить в новой сессии, то получим ошибку.
```

8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty? Напоминаем: по умолчанию через pipe передается только stdout команды слева от | на stdin команды справа. Это можно сделать, поменяв стандартные потоки местами через промежуточный новый дескриптор, который вы научились создавать в предыдущем вопросе.

```bash
kodi@kodi:~$ ls % 6>&2 2>&1 1>&6 | grep 123 file_test -c
5
```
6>&2 - новый дескриптор перенаправили в stderr

2>&1 - stderr перенаправили в stdout

1>&6 - stdout перенаправили в новый дескриптор


9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?

```bash
Выведет переменные окружения. Можно получить при помощи команд "printenv" и "env".
```

10. Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe.

```bash
/proc/<PID>/cmdline - "Этот файл содержит полную командную строку запуска процесса"
/proc/<PID>/exe - "Является символьной ссылкой, содержащей фактическое полное имя выполняемого файла"
```

11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo.

```bash
grep sse /proc/cpuinfo

sse4_2
```

12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. Это можно подтвердить командой tty, которая упоминалась в лекции 3.2. Однако:

vagrant@netology1:~$ ssh localhost 'tty'
not a tty
Почитайте, почему так происходит, и как изменить поведение.
```bash
При открытии окна создаётся сессия и ожидает пользователя новый процесс не создаётся , tty локально нет для запуска можно добавить "-t", тогда команда запустится с созданием псевдотерминала.
```

13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.

```bash
Надо измененить в файле /etc/sysctl.d/10-ptrace.conf 
"kernel.yama.ptrace_scope = 1" на "kernel.yama.ptrace_scope = 0
```

14. sudo echo string > /root/new_file не даст выполнить перенаправление под обычным пользователем, так как перенаправлением занимается процесс shell'а, который запущен без sudo под вашим пользователем. Для решения данной проблемы можно использовать конструкцию echo string | sudo tee /root/new_file. Узнайте что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать.

```bash
Команда "tee" отправляет вывод одновременно в файл и в stdout.
Команда получает вывод из stdin, перенаправленный через pipe от stdout команды echo, а так как команда запущена через sudo, соотвественно имеет права на запись в файл.
```
